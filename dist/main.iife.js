(function(){"use strict";class a{number;startTime;endTime;text;constructor(e,t,s,i){this.number=e,this.startTime=t,this.endTime=s,this.text=i}}function o(n){const e={number:parseInt(n.match(/^\d+/g)[0]),timing:{start:n.match(/(\d+:){2}\d+,\d+/g)[0].replace(",","."),end:n.match(/(\d+:){2}\d+,\d+/g)[1].replace(",",".")},text:n.split(/\r?\n/g).slice(2,n.split(/\r?\n/g).length).join(`
`)};return new a(e.number,r(e.timing.start),r(e.timing.end),e.text)}function r(n){for(var e=n.split(":"),t=0,s=1;e.length>0;)t+=s*parseFloat(e.pop(),10),s*=60;return t}class d{src;encoding;lang;kind;label;default;content;needsTransform;cues=[];constructor(e){this.src=e.src,this.encoding=e.dataset.encoding,this.lang=e.srclang,this.kind=e.kind,this.label=e.label,this.default=e.default,this.needsTransform=!0,this.src.endsWith(".vtt")&&(this.needsTransform=!1)}async parse(){const e=new TextDecoder(this.encoding),s=await(await fetch(this.src)).arrayBuffer();this.content=e.decode(s),this.cues=this.content.split(/\r?\n\r?\n/g).map(o)}}async function c(n){[...n.querySelectorAll("track")].map(t=>new d(t)).forEach(async t=>{if(!t.needsTransform)return;await t.parse();const s=n.addTextTrack(t.kind,t.label,t.lang);t.cues.forEach(i=>s.addCue(new VTTCue(i.startTime,i.endTime,i.text))),t.default&&(s.mode="showing"),console.log(t)})}document.addEventListener("DOMContentLoaded",()=>[...document.querySelectorAll("video")].forEach(c))})();
