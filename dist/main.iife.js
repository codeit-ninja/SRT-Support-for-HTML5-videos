(function(){"use strict";class a{number;startTime;endTime;text;constructor(e,t,s,r){this.number=e,this.startTime=t,this.endTime=s,this.text=r}}function c(n){try{if(!n||n===" ")return!1;const e={number:parseInt(n.match(/^\d+/g)[0]),timing:{start:n.match(/(\d+:){2}\d+,\d+/g)[0].replace(",","."),end:n.match(/(\d+:){2}\d+,\d+/g)[1].replace(",",".")},text:n.split(/\r?\n/g).slice(2,n.split(/\r?\n/g).length).join(`
`)};return new a(e.number,i(e.timing.start),i(e.timing.end),e.text)}catch{return!1}}function i(n){let e=n.split(":"),t=0,s=1;for(;e.length>0;)t+=s*parseFloat(e.pop(),10),s*=60;return t}async function o(n,e="utf-8"){return(!e||e==="")&&(e="utf-8"),fetch(n).then(t=>t.arrayBuffer()).then(t=>new TextDecoder(e).decode(t))}class d{element;src;encoding;lang;kind;label;default;body;needsTransform;cues=[];constructor(e){this.element=e,this.src=e.src,this.encoding=e.dataset.encoding,this.lang=e.srclang,this.kind=e.kind,this.label=e.label,this.default=e.default,this.needsTransform=!this.src.toLowerCase().endsWith(".vtt")}async parse(){this.body=await o(this.src,this.encoding),this.cues=this.body.split(/\r?\n\r?\n/g).map(c).filter(Boolean)}}async function l(n){const e=[...n.querySelectorAll("track")].map(t=>new d(t));for(const t of e){if(!t.needsTransform)continue;await t.parse(),t.element.remove();const s=n.addTextTrack(t.kind,t.label,t.lang);t.cues.forEach(r=>s.addCue(new VTTCue(r.startTime,r.endTime,r.text))),t.default&&(s.mode="showing")}}document.addEventListener("DOMContentLoaded",()=>[...document.querySelectorAll("video")].forEach(l))})();
